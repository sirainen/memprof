%define    prefix  /usr

Summary: Tool for memory profiling and leak detection
Name: memprof
Version: @VERSION@
Release: 1
Copyright: GPL
Group: Development/Debuggers
Source: memprof-%{version}.tar.gz
Requires: libglade >= 0.7
BuildRoot: /var/tmp/%{name}-root
ExclusiveArch: i386

%description
Memprof is a tool for profiling memory usage and
detecting memory leaks. It can be used with existing
binaries without need for recompilation.
%prep
%setup -q

%build
CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%{prefix}
make

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT%{prefix} install
strip $RPM_BUILD_ROOT%{prefix}/bin/*

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-, root, root)

%{prefix}/bin/*
%{prefix}/lib/*
%{prefix}/share/memprof
%{prefix}/share/locale/*/*/*

%changelog
* Fri Feb 09 2001 Owen Taylor <otaylor@redhat.com>
- Version 0.4.1

* Sat Jul 08 2000 Owen Taylor <otaylor@redhat.com>
- Some cleanups, reenable local files

* Wed Nov 10 1999 Owen Taylor <otaylor@redhat.com>
  (From Nils Philippsen <nils@wombat.dialup.fht-esslingen.de>)
- Added %defattr() so that files are owned by root
- Only require libglade >= 0.7, not >= 0.7-1
  (From mkj@redhat.com)
- ExclusiveArch: i386
- Changed group to Development/Debuggers

* Wed Oct 27 1999 Owen Taylor <otaylor@redhat.com>
- Initial package



